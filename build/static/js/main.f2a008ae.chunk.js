(this.webpackJsonppart1=this.webpackJsonppart1||[]).push([[0],{38:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(2),a=n(14),o=n.n(a),i=n(4),s=n(3),u=n.n(s),d="https://vast-coast-33181.herokuapp.com/api/persons",l={getAll:function(){return u.a.get(d).then((function(e){return e.data}))},create:function(e){return u.a.post(d,e).then((function(e){return e.data}))},update:function(e,t){return u.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))},remove:function(e){return u.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},put:function(e,t){return u.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},b=function(e){var t=e.messageObj;if(null==t.message)return null;return Object(r.jsx)("div",{style:t.style,children:t.message})},m=function(e){return Object(r.jsxs)("div",{children:["filter shown with ",Object(r.jsx)("input",{value:e.newFilter,onChange:function(t){e.setNewFilter(t.target.value)}})]})},j=function(e){return Object(r.jsxs)("form",{onSubmit:e.addPerson,children:[Object(r.jsxs)("div",{children:["name: ",Object(r.jsx)("input",{value:e.newName,onChange:function(t){e.setNewName(t.target.value)}})]}),Object(r.jsxs)("div",{children:["number: ",Object(r.jsx)("input",{value:e.newNumber,onChange:function(t){e.setNewNumber(t.target.value)}})]}),Object(r.jsx)("div",{children:Object(r.jsx)("button",{type:"submit",children:"add"})})]})},f=function(e){var t=e.persons,n=e.newFilter,c=e.setPersonsFunc,a=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})).map((function(e){return Object(r.jsxs)("li",{children:[e.name," - ",e.number," ",Object(r.jsx)("button",{onClick:function(){window.confirm("Delete ".concat(e.name,"?"))&&l.remove(e.id).then((function(n){var r=t.filter((function(t){return t.id!==e.id}));c(r)}))},children:"Delete"})]},e.name)}));return Object(r.jsx)("div",{children:Object(r.jsx)("ul",{children:a})})},h=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],a=t[1],o=Object(c.useState)(""),s=Object(i.a)(o,2),u=s[0],d=s[1],h=Object(c.useState)(""),g=Object(i.a)(h,2),O=g[0],p=g[1],w=Object(c.useState)(""),v=Object(i.a)(w,2),x=v[0],y=v[1],N=Object(c.useState)({message:null,style:{}}),S=Object(i.a)(N,2),k=S[0],F=S[1];return Object(c.useEffect)((function(){l.getAll().then((function(e){a(e)}))}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)("h2",{children:"Phonebook"}),Object(r.jsx)(b,{messageObj:k}),Object(r.jsx)(m,{newFilter:x,setNewFilter:y}),Object(r.jsx)("h3",{children:"add a new"}),Object(r.jsx)(j,{addPerson:function(e){e.preventDefault();var t={name:u,number:O},r=n.find((function(e){return e.name===t.name}));r?r.number===t.number?alert("".concat(r.name," is already added to phonebook")):window.confirm("".concat(r.name," is already added to your phonebook, replace the old number with a new one?"))&&l.put(r.id,t).then((function(e){a(n.map((function(t){return t.id!==r.id?t:e}))),d(""),p(""),F({message:"".concat(r.name," was sucessfully edited"),style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}}),setTimeout((function(){F({message:null,style:{}})}),3e3)})).catch((function(e){F({message:"Information of '".concat(r.name,"' has already been removed from server"),style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}}),setTimeout((function(){F({message:null,style:{}})}),5e3),a(n.filter((function(e){return e.id!==r.id})))})):l.create(t).then((function(e){a(n.concat(e)),d(""),p(""),F({message:"Added ".concat(e.name),style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}}),setTimeout((function(){F({message:null,style:{}})}),3e3)}))},newName:u,setNewName:d,newNumber:O,setNewNumber:p}),Object(r.jsx)("h3",{children:"Numbers"}),Object(r.jsx)(f,{persons:n,newFilter:x,setPersonsFunc:a})]})};o.a.render(Object(r.jsx)(h,{}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.f2a008ae.chunk.js.map